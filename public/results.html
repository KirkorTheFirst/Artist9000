<html lang="en-US">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
    <link rel="stylesheet" href="sketch.css">
    <link rel="stylesheet" href="results.css">
    <title>Artist 9000</title>
  </head>
  <body>
    <div class="container">
        <div class="title">Final Guess</div>
        <div id="guess">
            <img id="drawing">
        </div>
        <table id="closest">
            <tr>
                <th><span id="final">idk man</span></th>
            </tr>
            <tr>
                <td id="filler"></td>
            </tr>
        </table>
        <div class="title">Other Close Guesses</div>
        <table id="closest">
            <tr>
                <td><span id="2">2nd closest result</span></td>
            </tr>
            <tr>
                <td><span id="3">2nd closest result</span></td>
            </tr>
            <tr>
                <td><span id="4">2nd closest result</span></td>
            </tr>
            <tr>
                <td><span id="5">2nd closest result</span></td>
            </tr>
            <tr>
                <td><span id="6">2nd closest result</span></td>
            </tr>
            <tr>
                <td><span id="7">2nd closest result</span></td>
            </tr>
            <tr>
                <td><span id="8">2nd closest result</span></td>
            </tr>
            <tr>
                <td><span id="9">2nd closest result</span></td>
            </tr>
            <tr>
                <td><span id="10">2nd closest result</span></td>
            </tr>
        </table>

        <div id="submit2">
            <button id="back" class="submit">Play Again!</button>
            <button id="back2" class="submit">Back to Main Menu</button>
          </div>
    </div>

    <script>

        if (sessionStorage.getItem("canvasURL") == null) window.location.href = 'index.html';

        document.getElementById("drawing").setAttribute("src", sessionStorage.getItem("canvasURL"))

        let givenPrompt2 = sessionStorage.getItem("prompt");

        document.getElementById("back").onclick = function () {
            sessionStorage.removeItem("prompt");
            window.location.href = 'sketch.html';
        }
        document.getElementById("back2").onclick = function () {
            sessionStorage.removeItem("prompt");
            window.location.href = 'index.html';
        }

        //first set the final one
        let finalPrompt = sessionStorage.getItem("prompt1");
        let finalSimilarity = sessionStorage.getItem("similarity1");
        document.getElementById("final").innerHTML = finalPrompt + " [" + addZeros(finalSimilarity) + "%]";

        //now do the rest
        for (let i = 2; i <= 10; i++){
            let prompt = sessionStorage.getItem("prompt" + i.toString());
            let similarity = sessionStorage.getItem("similarity" + i.toString());
            document.getElementById(i.toString()).innerHTML = prompt + " [" + addZeros(similarity) + "%]";
        }

        function addZeros(number){
            let string = String(number).padEnd(5, '0');
            //if there was no decimal originally, add one in

            //first temporarily concatenate a symbol
            string += "%";
            string = string.replace("00%", ".00%");
            //removes symbol
            return string.replace("%", "");
        }

    </script>
  </body>
</html>