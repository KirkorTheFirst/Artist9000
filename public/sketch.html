<html lang="en-US">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
    <script src="https://cdn.jsdelivr.net/npm/p5@1.4.1/lib/p5.js"></script>
    <script src="javascript/sketch.js"></script>
    <script src="javascript/heap.js"></script>
    <script src="javascript/logic.js"></script>
    

    <link rel="stylesheet" href="sketch.css">
  </head>
  <body>
    <div class="container">
      <div class="title">Draw This: <span id="prompt">yeet</span></div>
      <div id="game">
        <div id="canvas"></div>
        <div id="tools">
          <button id="clearScreen" onclick="clearScreen()">CLEAR</button>
          <button id="eraser" onclick="equipEraser()"><img src="resources/eraser.png" style="border: none;"></button>
          <button id="pen" onclick="equipPencil()"><img src="resources/pencil.png" style="border: none;"></button>
          <input type="color" id="paint" value="#000000">
        </div>
      </div>
      <div id="submit2">
        <button id="saveDrawing" class="submit" onclick="saveDrawing(givenPrompt)">Download</button>
        <button id="submit" class="submit">Computer Guess</button>
      </div>
    </div>
    <script>
      //we probably want to add an eventlistener to the canvas that sees when the mouse has been pressed, and then we can transfer the drawing into an array. 
      //I dont ken how to set the drawing to be of a max of 256 pixels. i guess if it is over just subtract or divide or something?
      //thus, because this will probably be long, maybe move this all to another file?
      let drawing;

      let prompts = [
        'line',
        'triangle',
        'zigzag',
        'leg',
        'square',
        'stairs',
        'canoe',
        'mountain',
        'pillow',
        'door',
        'swing',
        'spoon',
        'fork',
      ];
      let canvas = document.getElementById('canvas')
      canvas.addEventListener('mousedown', recordMouseClicks)
      let initMouseX = null
      let initMouseY = null
      let canvasBeenClicked = false
      function recordMouseClicks() {
        if(!canvasBeenClicked) {
          
        }
      }
        

      givenPrompt = prompts[Math.floor(Math.random() * prompts.length)];
      document.getElementById("prompt").innerHTML = givenPrompt;

      sessionStorage.setItem("prompt", givenPrompt);

      document.getElementById("paint").oninput = function () {
        let r = parseInt(this.value.substring(1, 3), 16);
        let g = parseInt(this.value.substring(3, 5), 16);
        let b = parseInt(this.value.substring(5, 7), 16);
        changeColor(r, g, b);
      }

      document.getElementById("submit").onclick = function () {
        let canvas = document.getElementById("defaultCanvas0");
        sessionStorage.setItem("canvasURL", canvas.toDataURL("img/png"));
        // RUN THE BIG SCARY ALGORITHM HERE AND GET A HEAP
        window.location.href = 'results.html';
      }
    </script>
  </body>
</html>