<html lang="en-US">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
    <script src="https://cdn.jsdelivr.net/npm/p5@1.4.1/lib/p5.js"></script>
    <script src="javascript/sketch.js"></script>
    <script src="javascript/heap.js"></script>
    <script src="javascript/logic.js"></script>
    

    <link rel="stylesheet" href="sketch.css">
  </head>
  <body>
    <div class="container">
      <div class="title">Draw This: <span id="prompt"></span></div>
      <div id="game">
        <div id="canvas"></div>
        <div id="tools">
          <button id="clearScreen" onclick="clearScreen()"><img src="resources/clear.png"></button>
          <button id="eraser" onclick="equipEraser()"><img src="resources/eraser2.png"></button>
          <button id="pen" onclick="equipPencil()"><img src="resources/pencil2.png"></button>
          <input id="paint" type="color" value="#000000">
        </div>
      </div>
      <div id="submit2">
        <button id="saveDrawing" class="submit" onclick="saveDrawing(givenPrompt)">Download</button>
        <button id="submit" class="submit">Computer Guess</button>
      </div>
    </div>
    <div id="text">Note: If you resize the page, you must reload the page for the canvas to be resized</div>
    <script>
      //we probably want to add an event listener to the canvas that sees when the mouse has been pressed, and then we can transfer the drawing into an array.
      //I dont ken how to set the drawing to be of a max of 256 pixels. i guess if it is over just subtract or divide or something?
      //thus, because this will probably be long, maybe move this all to another file?
      let drawing;
      let prompts = [
        'axe',
        'baseball bat',
        'bed',
        'bench',
        'bread',
        'canoe',
        'circle',
        'diamond',
        'door',
        'ear',
        'elbow',
        'envelope',
        'fork',
        'hammer',
        'hexagon',
        'hockey stick',
        'ladder',
        'leg',
        'line',
        'lipstick',
        'mountain',
        'ocean',
        'paper clip',
        'pear',
        'pencil',
        'pillow',
        'popsicle',
        'rainbow',
        'screwdriver',
        'see saw',
        'shoe',
        'shorts',
        'shovel',
        'spoon',
        'square',
        'stairs',
        'star',
        'stitches',
        'streetlight',
        'string bean',
        'suitcase',
        'swing set',
        'sword',
        't-shirt',
        'table',
        'tent',
        'triangle',
        'underwear',
        'wine bottle',
        'zigzag'
      ];
      let canvas = document.getElementById('canvas')
      canvas.addEventListener('mousedown', recordMouseClicks)
      let initMouseX = null
      let initMouseY = null
      let canvasBeenClicked = false
      function recordMouseClicks() {
        if(!canvasBeenClicked) {
          
        }
      }
        

      givenPrompt = prompts[Math.floor(Math.random() * prompts.length)];
      document.getElementById("prompt").innerHTML = givenPrompt;

      sessionStorage.setItem("prompt", givenPrompt);

      document.getElementById("paint").oninput = function () {
        let r = parseInt(this.value.substring(1, 3), 16);
        let g = parseInt(this.value.substring(3, 5), 16);
        let b = parseInt(this.value.substring(5, 7), 16);
        changeColor(r, g, b);
      }

      document.getElementById("submit").onclick = function () {
        let canvas = document.getElementById("defaultCanvas0");
        sessionStorage.setItem("canvasURL", canvas.toDataURL("img/png"));

        
        // RUN THE BIG SCARY ALGORITHM HERE AND GET A HEAP
        window.location.href = 'results.html';
      }
    </script>
  </body>
</html>